import{r as z,R as r}from"./index-BBqxgoSh.js";import{e as d}from"./index-vyi8JLgO.js";import{i as L}from"./index-Du2DAyME.js";import{u as f}from"./index-DzUbadkt.js";import{c as M}from"./index-CZnEoGlV.js";var R=L();const H=({defaultValue:h={fileData:"",text:""},className:y="",classNameLabel:F="",classNameContent:x="",classNameInput:T="",classNameError:P="",onChange:w=l=>{d.env_log(l,{name:"onChange File"})},accept:o=[],children:b,clearAfterUpload:D=!1,MAX_SIZE_FILE:c=5e6,parseProgress:q=l=>l,onChangeProgress:C,onChangeError:E,disabled:V=!1,textMaxSizeFile:I="File max size",capture:N,...n})=>{const{_t:l}=M.use_T({...n}),_=async e=>{if(n!=null&&n.onUploadFile){const a=await(n==null?void 0:n.onUploadFile(e));if(a)return a}const t=await R.parseFile(e.file,{updateProgress:e.setProgress});return{file:e==null?void 0:e.file,fileData:t,base64:`${t??""}`,text:e.nameFile,extend:e.extend}},{data:g,setData:v}=f.useData(void 0,{onChangeDataAfter:E}),s=z.useRef(null),{setData:i}=f.useData(h,{onChangeDataAfter:w}),{data:u,setData:m}=f.useData(-1,{onChangeDataAfter:C}),$=e=>{var a;const t=(a=e.split(".").pop())==null?void 0:a.toLowerCase();if(o.length!=0&&t&&!o.map(p=>p.toLowerCase()).includes(t))throw"File Invalid";return t},A=async e=>{try{v(void 0);const t=e.target.files[0];if(!t){m(-2),i({fileData:"",text:""});return}if((t==null?void 0:t.size)>c)throw`${l(I)} ${c/1e6}mb`;const a=e.target.value.split("\\").pop();d.env_log(a,{name:"nameFile"});const p=$(a),U=await _({file:t,setFileData:i,nameFile:a,setProgress:m,extend:p??""});i(U),D&&(e.target.value=null,e.target.type="text",setTimeout(()=>{e.target.type="file"},100),s!=null&&s.current&&(s.current.value=null))}catch(t){v({message:`${t}`,data:t}),m(-2),i({fileData:"",text:""}),d.env_log(t,{name:"error upload file",color:"red"})}};return r.createElement(r.Fragment,null,r.createElement("div",{className:`fenext-input-file ${y}`},r.createElement("label",{className:`fenext-input-file-label ${F}`},r.createElement("div",{className:`fenext-input-file-content ${x}`},b),r.createElement("input",{ref:s,type:"file",className:`fenext-input-file-input ${T}`,onChange:A,accept:o.map(e=>`.${e}`).join(","),disabled:V,capture:N})),u>0&&u<100&&q(u),g&&r.createElement("div",{className:`fenext-error ${P}`},l(g.message))))};H.__docgenInfo={description:"",methods:[],displayName:"InputFile",props:{accept:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Allowed file types for the input element",defaultValue:{value:"[]",computed:!1}},defaultValue:{required:!1,tsType:{name:"FileProps"},description:"Default value for the input element",defaultValue:{value:`{
    fileData: "",
    text: "",
}`,computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: FileProps) => void",signature:{arguments:[{type:{name:"FileProps"},name:"v"}],return:{name:"void"}}},description:"Function to call when the value of the input element changes",defaultValue:{value:`(v: FileProps) => {
    env_log(v, {
        name: "onChange File",
    });
}`,computed:!1}},onChangeProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: number) => void",signature:{arguments:[{type:{name:"number"},name:"v"}],return:{name:"void"}}},description:"Function to call when the value of the input element changes progress"},onChangeError:{required:!1,tsType:{name:"signature",type:"function",raw:"(v: ErrorProps | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"ErrorProps | undefined",elements:[{name:"ErrorProps"},{name:"undefined"}]},name:"v"}],return:{name:"void"}}},description:"Function to call when the value of the input element changes error"},onUploadFile:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: InputFileUploadDataProps) => Promise<FileProps>",signature:{arguments:[{type:{name:"InputFileUploadDataProps"},name:"data"}],return:{name:"Promise",elements:[{name:"FileProps"}],raw:"Promise<FileProps>"}}},description:"Function to call when a file is being uploaded"},clearAfterUpload:{required:!1,tsType:{name:"boolean"},description:"Whether to clear the input element after a file has been uploaded",defaultValue:{value:"false",computed:!1}},MAX_SIZE_FILE:{required:!1,tsType:{name:"number"},description:"Maximum size of file that can be uploaded",defaultValue:{value:"5000000",computed:!1}},parseProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(progres: number) => any",signature:{arguments:[{type:{name:"number"},name:"progres"}],return:{name:"any"}}},description:"Function to parse progress during file upload",defaultValue:{value:"(e) => e",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"disabled upload.",defaultValue:{value:"false",computed:!1}},textMaxSizeFile:{required:!1,tsType:{name:"string"},description:"textMaxSizeFile.",defaultValue:{value:'"File max size"',computed:!1}},capture:{required:!1,tsType:{name:'ReactInputHTMLAttributes["capture"]',raw:'React.InputHTMLAttributes<HTMLInputElement>["capture"]'},description:""},className:{required:!1,tsType:{name:"string"},description:"Class name for the component",defaultValue:{value:'""',computed:!1}},classNameLabel:{required:!1,tsType:{name:"string"},description:"Class name for the label element",defaultValue:{value:'""',computed:!1}},classNameContent:{required:!1,tsType:{name:"string"},description:"Class name for the content element",defaultValue:{value:'""',computed:!1}},classNameInput:{required:!1,tsType:{name:"string"},description:"Class name for the input element",defaultValue:{value:'""',computed:!1}},classNameError:{required:!1,tsType:{name:"string"},description:"Class name for the error element",defaultValue:{value:'""',computed:!1}}},composes:["_TProps","PropsWithChildren"]};export{H as I};
